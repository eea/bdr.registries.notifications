{% extends layout_template %}

{% block head_title %}Reporting cycle for year {{ cycle }} - {% endblock %}

{% block content %}
<div class="cycle-actions">
  <a href="{% url 'notifications:cycle:stage_add' pk=cycle.pk %}">Add new stage</a>
</div>


<h1>Reporting cycle for year {{ cycle }}</h1>

{% for stage in cycle.stages.all %}
  <h2>{{ stage }}</h2>

  <table class="brn-table">
    <thead>
      <tr>
        <th>Obligation</th>
        <th>Status</th>
        <th>Last updated</th>
      </tr>
    </thead>
    <tbody>
      {% for template in stage.templates.all %}
        <tr>
        <td><a href="{% url 'notifications:template:view' template.pk %}">{{ template.group }}</a></td>
        <td>{{ template.is_triggered|yesno:"Sent,Draft" }}</td>
        <td>{{ template.last_action.history_date.date }}</td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
{% empty %}
  No stages for Cycle {{ cycle }}.
{% endfor %}

{% endblock %}
