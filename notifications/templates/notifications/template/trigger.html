{% extends layout_template %}

{% block head_title %}Trigger - {{ template.emailtemplate }} - Reporting cycle for year {{ template.cycle.year }} - {% endblock %}

{% block content %}

<h1>Trigger - {{ template.emailtemplate }}</h1>

<h2>Send notifications</h2>
{% if template.is_triggered %}
	<p>This stage has been triggered.</p>
{% else %}
	<p style="color:red;">Things to consider when implementing this:</p>
	<ul style="color:red;">
		<li>Fetch the list of emails and corresponding email template parameters based on the specific <strong>GROUP</strong>.</li>
		<li>When sending an email, don't forget to save a <strong>CycleNotification</strong> to keep track.</li>
		<li>Don't send an email twice!</li>
	</ul>
  {% with recipients as persons %}
    <form action="" method="post">
        {% csrf_token %}
        {{ form.as_p }}
        <input type="submit" value="I Understand, send {{ persons|length }} emails." />
    </form>
    {% endwith %}
{% endif %}

{% endblock %}
